# MediaSoftJWT

<ins>Цель</ins>:<br>
Получить опыт работы с Jwt. <br> 
<ins>Задачи</ins>:<br>
<ul>
    <li>Реализовать сервис, предоставляющий возможность регистрироваться и логиниться пользователям, при успешном логине выдающий Jwt Токен.</li>
    <li>Создать сервис на SpringBoot, предоставляющий 2 эндпоинта: для регистрации и логина, сохраняющий в бд логин, пароль, email. Пароль должен быть захэширован (не путать с зашифрован) при сохранении в бд.</li>
    <li>Сгенерировать пару ключей шифрования (keypair), положить в ресурсы проекта. использовать например keytool -genkeypair</li>
    <li>При успешном логине должен собираться jwt токен, подписываться приватным ключом, в ответ на правильный логин и пароль выдаваться токен. В токене в payload кладется какая-либо информация о пользователе, например email.</li>
    <li>Добавить эндпоинт /.well-known/jwks.json, выдающий публичный ключ. Для работы с ключами использовать библиотеку com.nimbusds:nimbus-jose-jwt. Клиент будет использовать публичный ключ для валидации токена. Ответ будет вида:
    	<br>{<br>
    	    &emsp; "keys": [<br>
    	    &ensp;&emsp; {<br>
    	      &ensp;&emsp;&emsp; "use": "sig",<br>
    	      &ensp;&emsp;&emsp; "kty": "RSA",<br>
    	      &ensp;&emsp;&emsp; "kid": "public:c424b67b-fe28-45d7-b015-f79da50b5b21",<br>
    	      &ensp;&emsp;&emsp; "alg": "RS256",<br>
    	      &ensp;&emsp;&emsp; "n": "sttd***6h0gdMoDfZTq9Gn5S-Aq0-_-fIfyN9qrrQ0E1Q_QDhvqXx8eQ1r9smM",<br>
    	      &ensp;&emsp;&emsp; "e": "AQAB"<br>
    	    &ensp;&emsp; }<br>
    	  &emsp; ]<br>
    	}<br></li>
    <li>Создать сервис-клиент (отдельный микросервис на SpringBoot), принимающий токен в хедерах. Создать любой эндпоинт. Создать фильтр всех запросов, который берет публичный ключ с  /.well-known/jwks.json сервиса авторизации и верифицирует подпись токена. Если токен прошел верификацию, из токена извлекается email и кладется в хедер и пробрасывается фильтром дальше в контроллер. Эндпоинт выводит в консоль email.</li>
    <li>Создать коллекцию запросов в Postman. Первый запрос регистрирует юзера, второй запрос логинится и заносит токен в переменные коллекции, третий - отправляет запрос в сервис-клиент, токен берет из переменных коллекции, кладет в хедеры.</li>
    <li>Доп.задание: сервис авторизации должен отвечать по HTTPS</li>
</ul>
<ins>Результат</ins>:<br>
<ul>
    <li>Знание структуры jwt</li>
    <li>Знание понятия «Асинхронное шифрование»</li>
    <li>Понимание основных принципов работы механизмов авторизации в микросервисных системах</li>
</ul>
